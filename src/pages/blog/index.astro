---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const formatDate = (date: Date) => {
    return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
    });
};
---

<Layout title="Blog | Savitha">
    <div class="max-w-3xl mx-auto">
        
        <header class="mb-12 text-center">
            <h1 class="text-4xl md:text-5xl font-comic-heading text-black mb-4 transform -rotate-1">
                <span class="bg-primary text-white px-4 py-2 inline-block shadow-[4px_4px_0_0_#000] border-black border-2">
                    My Writings
                </span>
            </h1>
            <p class="text-xl font-comic-body text-text-muted">Thoughts, tutorials, and rants about web development.</p>
        </header>

        <div class="space-y-6">
            {allPosts.map(post => (
                <article class="comic-panel group hover:-translate-y-1 transition-transform duration-200">
                    <a href={`/blog/${post.slug}`} class="flex flex-col sm:flex-row sm:items-baseline justify-between gap-2 sm:gap-4">
                        <h2 class="text-xl font-bold font-comic-heading text-black group-hover:text-primary transition-colors">
                            {post.data.title}
                        </h2>
                        <div class="flex items-center gap-4 shrink-0">
                            <span class="h-px bg-black/20 flex-1 hidden sm:block w-32 border-dashed border-b border-black/20"></span>
                            <time datetime={post.data.pubDate.toISOString()} class="font-comic-body font-bold text-text-muted text-sm bg-accent/20 px-2 py-1 rounded border border-black/20">
                                {formatDate(post.data.pubDate)}
                            </time>
                        </div>
                    </a>
                </article>
            ))}
        </div>

    </div>
</Layout>
